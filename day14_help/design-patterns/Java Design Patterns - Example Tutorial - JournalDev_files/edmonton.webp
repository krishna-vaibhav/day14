function ez_attachEvent(element,evt,func){if(element.addEventListener){element.addEventListener(evt,func,false);}else{element.attachEvent("on"+ evt,func);}}
function ez_attachEventWithCapture(element,evt,func,useCapture){if(element.addEventListener){element.addEventListener(evt,func,useCapture);}else{element.attachEvent("on"+ evt,func);}}
function ez_detachEvent(element,evt,func){if(element.removeEventListener){element.removeEventListener(evt,func);}else{element.detachEvent("on"+evt,func);}}
function ez_getQueryString(field,url){var href=url?url:window.location.href;var reg=new RegExp('[?&]'+ field+'=([^&#]*)','i');var string=reg.exec(href);return string?string[1]:null;}(function(root,factory){if(typeof define==='function'&&define.amd){define('ezRiveted',[],factory)}else if(typeof module==='object'&&module.exports){module.exports=factory()}else{root.riveted=factory()}}(this,function(){var riveted=(function(){var started=false,stopped=false,turnedOff=false,clockTime=0,startTime=new Date(),clockTimer=null,idleTimer=null,sendEvent,sendUserTiming,reportInterval,scrollDepth=0,idleTimeout,scrollTimer=0;function init(options){options=options||{};reportInterval=parseInt(options.reportInterval,10)||5;idleTimeout=parseInt(options.idleTimeout,10)||30;if(typeof options.eventHandler=='function'){sendEvent=options.eventHandler}if(typeof options.userTimingHandler=='function'){sendUserTiming=options.userTimingHandler}addListener(document,'keydown',trigger);addListener(document,'click',trigger);addListener(document,'touchstart',trigger);addListener(window,'mousemove',throttle(trigger,500));addListener(window,'scroll',triggerScroll);addListener(document,'visibilitychange',visibilityChange);addListener(document,'webkitvisibilitychange',visibilityChange)}function triggerScroll(){if(scrollTimer>0){clearTimeout(scrollTimer)}setIdle();scrollTimer=setTimeout(function(){stopScroll()},50)}function stopScroll(){clearTimeout(scrollTimer);trigger();setScrollDepth()}function setScrollDepth(){var h=document.documentElement,b=document.body,st='scrollTop',sh='scrollHeight';var percent=(h[st]||b[st])/((h[sh]||b[sh])-h.clientHeight)*100;if(percent>scrollDepth){scrollDepth=percent}}function throttle(func,wait){var context,args,result;var timeout=null;var previous=0;var later=function(){previous=new Date;timeout=null;result=func.apply(context,args)};return function(){var now=new Date;if(!previous)previous=now;var remaining=wait-(now-previous);context=this;args=arguments;if(remaining<=0){clearTimeout(timeout);timeout=null;previous=now;result=func.apply(context,args)}else if(!timeout){timeout=setTimeout(later,remaining)}return result}}function addListener(element,eventName,handler){if(element.addEventListener){element.addEventListener(eventName,handler,false)}else if(element.attachEvent){element.attachEvent('on'+eventName,handler)}else{element['on'+eventName]=handler}}sendUserTiming=function(timingValue){};sendEvent=function(time){};function setIdle(){clearTimeout(idleTimer);stopClock()}function visibilityChange(){if(document.hidden||document.webkitHidden){setIdle()}}function clock(){clockTime+=0.1;clockTime=Math.round(clockTime*100)/100;if(clockTime>0&&(clockTime%reportInterval===0)){sendEvent(clockTime)}}function stopClock(){stopped=true;clearInterval(clockTimer)}function turnOff(){setIdle();turnedOff=true}function turnOn(){turnedOff=false}function restartClock(){stopped=false;clearInterval(clockTimer);clockTimer=setInterval(clock,100)}function getEngagedTime(){return Math.round(clockTime)}function getScrollDepth(){return Math.round(scrollDepth)}function startRiveted(){var currentTime=new Date();var diff=currentTime-startTime;started=true;sendUserTiming(diff);clockTimer=setInterval(clock,1000)}function resetRiveted(){startTime=new Date();clockTime=0;started=false;stopped=false;clearInterval(clockTimer);clearTimeout(idleTimer)}function trigger(){if(turnedOff){return}if(!started){startRiveted()}if(stopped){restartClock()}clearTimeout(idleTimer);idleTimer=setTimeout(setIdle,idleTimeout*1000+100)}return{init:init,trigger:trigger,setIdle:setIdle,on:turnOn,off:turnOff,reset:resetRiveted,getTime:getEngagedTime,getScrollDepth:getScrollDepth}})();return riveted}));
var ezux=function(){function e(){t(),F.addDeviceSizes(),F.addLocalTime(),m(),a(),h(),y()}function t(){A=0,E=15e3,C="1"==ez_getQueryString("ezux_debug"),k={copyPaste:0,shares:0},I={copyPasteCount:0,engagedTime:0,isEngagedPage:0,scrollDepth:0,unloadTime:0,shareCount:0},q=1800,L=_ezaq.page_view_id,x=10,O=new Date,U={engagedAdded:0,tosAdded:0},N=3e3,H=null}function n(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n}function o(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent?e.detachEvent("on"+t,n):delete e["on"+t]}function a(){if(n(document,"blur",M.unload),n(document,"copy",M.copyPaste),n(document,"cut",M.copyPaste),n(document,"mouseout",M.mouseOut),n(document,"paste",M.copyPaste),n(window,"beforeunload",M.unload),n(window,"blur",M.unload),n(window,"pagehide",M.unload),n(window,"unload",M.unload),n(window,"load",M.load),n(window,"pageshow",M.pageshow),d(),document.addEventListener){var e=i();H=function(t){document[e.hiddenPropName]?M.unload(t):M.pageshow(t)},document.addEventListener(e.visibilityChangeEventName,H,!1)}else document.attachEvent("onvisibilitychange",M.unload)}function i(){var e,t;return void 0!==document.hidden?(e="hidden",t="visibilitychange"):void 0!==document.msHidden?(e="msHidden",t="msvisibilitychange"):void 0!==document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange"),{hiddenPropName:e,visibilityChangeEventName:t}}function r(){if(o(document,"blur",M.unload),o(document,"copy",M.copyPaste),o(document,"cut",M.copyPaste),o(document,"mouseout",M.mouseOut),o(document,"paste",M.copyPaste),o(window,"beforeunload",M.unload),o(window,"blur",M.unload),o(window,"pagehide",M.unload),o(window,"unload",M.unload),o(window,"load",M.load),o(window,"pageshow",M.pageshow),c(),document.removeEventListener){var e=i();document.removeEventListener(e.visibilityChangeEventName,H,!1)}else document.detachEvent("onvisibilitychange",M.unload)}function d(){var e=u();if(C){var t=e.map(function(e){return e.href});void 0!==t&&_("[Page Share] "+t.join(", "))}for(var o=0;o<e.length;o++)n(e[o],"click",M.pageshare)}function c(){for(var e=u(),t=0;t<e.length;t++)o(e[t],"click",M.pageshare)}function u(){var e=[];return e.push.apply(e,document.querySelectorAll('a[href*="facebook.com/sharer/sharer.php"]')),e.push.apply(e,document.querySelectorAll('a[href*="facebook.com/sharer.php"]')),e.push.apply(e,document.querySelectorAll('a[href*="facebook.com/share.php"]')),e.push.apply(e,document.querySelectorAll('div[class*="fb-share-button"]')),e.push.apply(e,document.querySelectorAll('a[href*="twitter.com/share"]')),e.push.apply(e,document.querySelectorAll('a[href*="twitter.com/intent/tweet"]')),e.push.apply(e,document.querySelectorAll('iframe[class*="twitter-share-button"]')),e.push.apply(e,document.querySelectorAll('a[href*="plus.google.com/share"]')),e.push.apply(e,document.querySelectorAll('iframe[src*="apis.google.com/u/0/se/0/_/+1/sharebutton"]')),e.push.apply(e,document.querySelectorAll('a[href*="linkedin.com/cws/share"]')),e.push.apply(e,document.querySelectorAll('a[href*="linkedin.com/shareArticle"]')),e.push.apply(e,document.querySelectorAll('a[href*="pinterest.com/pin/create/button"]')),e.push.apply(e,document.querySelectorAll('a[href*="pinterest.com/pin/create/bookmarklet"]')),e.push.apply(e,document.querySelectorAll('a[href*="tumblr.com/share/link"]')),e.push.apply(e,document.querySelectorAll('a[href*="reddit.com/submit"]')),e}function l(e){_("Deleting "+e),document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/"}function s(e){for(var t=e+"=",n=decodeURIComponent(document.cookie).split(";"),o=0;o<n.length;o++){for(var a=n[o];" "==a.charAt(0);)a=a.substring(1);if(0==a.indexOf(t))return a.substring(t.length,a.length)}return""}function p(e){return e+"_"+did}function g(){return(new Date-O)/1e3}function m(){__ez.bit.Fire(),__ez.pel.Fire()}function f(e){return e>=x}function _(e){C&&console.info("[UX] "+e)}function h(){"function"==typeof define&&define.amd?require(["ezRiveted"],function(e){w(e)}):w(riveted)}function v(){"undefined"!=typeof riveted&&(T=riveted).reset()}function w(e){(T=e).init({reportInterval:5,idleTimeout:30,eventHandler:function(e){_("Event: "+parseInt(e)+" --- Engaged Time: "+parseInt(T.getTime())),T.getTime()>=q&&(_("Turning off timer"),M.unload({type:"max"}),T.off())}})}function y(){A=setInterval(function(){M.unload({type:"auto"}),g()>q&&(_("Turning off auto"),clearInterval(A))},E)}function D(){M.unload({type:"auto"}),clearInterval(A)}function z(){if(_("[Performance] Store performance"),1!=S&&window.performance&&window.performance.timing){var e=performance.timing.navigationStart,t=performance.timing.connectEnd,n=performance.timing.responseStart,o=performance.timing.responseEnd,a=performance.timing.domInteractive,i=performance.timing.domContentLoadedEventEnd,r=performance.timing.domComplete;if(e>0&&r>0){if(window.performance.navigation){var d=performance.navigation.type,c=performance.navigation.redirectCount;__ez.bit.Add(L,[new __ezDotData("navigation_type",d),new __ezDotData("redirect_count",c)])}perf_vals={};var u=t-e,l=n-t,s=o-n,p=a-o,g=i-o,f=r-o;__ez.bit.Add(L,[new __ezDotData("perf_is_tracked",1),new __ezDotData("perf_nav_to_connect",u),new __ezDotData("perf_connect_to_resp_start",l),new __ezDotData("perf_resp_time",s),new __ezDotData("perf_interactive",p),new __ezDotData("perf_contentloaded",g),new __ezDotData("perf_complete",f)]),_("[Performance] perf_nav_to_connect: "+u),_("[Performance] perf_connect_to_resp_start: "+l),_("[Performance] perf_resp_time: "+s),_("[Performance] perf_interactive: "+p),_("[Performance] perf_contentloaded: "+g),_("[Performance] perf_complete: "+f),S=!0,m()}}}function b(){var e=p("ezux_et"),t=p("ezux_tos"),n=T.getTime()-U.engagedAdded,o=g()-U.tosAdded,a=s(e),i=s(t);n==I.engagedTime&&(n=0);var r=parseInt(n)+parseInt(""==a?0:a),d=parseInt(o)+parseInt(""==i?0:i);_("[Times] Total Engaged: "+r+" (+"+n+")"),_("[Times] Total TOS: "+d+" (+"+o+")"),document.cookie=e+"="+r,document.cookie=t+"="+d,U.engagedAdded+=n,U.tosAdded+=o}function P(e){var t=e.split(" ");2!==t.length&&_("Invalid ezoawesome cookie value");var n=t[0],o=t[1];if(!isNaN(o)){var a=Math.floor((Date.now()-o)/1e3);__ez.pel.AddById(n,[new __ezDotData("click_bounce_time",a)]),_("[Bounce] impId: "+n),_("[Bounce] bounceTime: "+a)}}if("undefined"!=typeof _ezaq&&_ezaq.hasOwnProperty("page_view_id")){var T,S=!1,A=0,E=15e3,C="1"==ez_getQueryString("ezux_debug"),k={copyPaste:0,shares:0},I={copyPasteCount:0,engagedTime:0,isEngagedPage:0,scrollDepth:0,unloadTime:0,shareCount:0},q=1800,L=_ezaq.page_view_id,x=10,O=new Date,U={engagedAdded:0,tosAdded:0},N=3e3,H=null,M={copyPaste:function(){k.copyPaste++},mouseOut:function(e){if(void 0!==(e=e||window.event)&&void 0!==e.target&&void 0!==e.target.tagName&&"input"!==e.target.tagName.toLowerCase()){var t=Math.max(document.documentElement.clientWidth,window.innerWidth||0);e.clientX>=t-50||e.clientY>=50||e.relatedTarget||e.toElement||M.unload(e)}},load:function(e){z()},unload:function(e){var t=(new Date).getTime();(0===I.unloadTime||t>I.unloadTime+N)&&(b(),z(),F.unloadAll(e),I.unloadTime=t)},pageshow:function(e){var t=p("ezoawesome"),n=s(t);n.length>0&&(_("Bounce ("+t+") detected with val "+n),P(n),l(t))},pageshare:function(e){k.shares++,F.addPageShares()}},F={addCopyPaste:function(){k.copyPaste>0&&k.copyPaste!=I.copyPasteCount&&(__ez.bit.Add(L,[new __ezDotData("copy_paste_count",k.copyPaste)]),I.copyPasteCount=k.copyPaste)},addDeviceSizes:function(){_("Storing device sizes"),__ez.bit.Add(L,[new __ezDotData("device_width",screen.width),new __ezDotData("device_height",screen.height)])},addEngagedTimes:function(e){e!=I.engagedTime&&(__ez.bit.Add(L,[new __ezDotData("engaged_time",e)]),I.engagedTime=e)},addIsEngagedPage:function(e){0==I.isEngagedPage&&f(e)&&(__ez.bit.Add(L,[new __ezDotData("is_engaged_page",1)]),I.isEngagedPage=1)},addIsFirstEngagedPage:function(e){var t=p("ezux_ifep");0==s(t).length&&f(e)&&(_("Adding first engaged cookie"),document.cookie=t+"=true",__ez.bit.Add(L,[new __ezDotData("is_first_engaged_page",1)]))},addLocalTime:function(){_("Storing local time");var e=new Date,t=e.getTimezoneOffset();if(!(t<-840||t>720)){var n=new Date(e-6e4*t);if(!(Math.abs(n-e)/36e5>14)){Date.prototype.toISOString||function(){function e(e){return e<10?"0"+e:e}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"."+(this.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}}();var o=n.toISOString().slice(0,19).replace("T"," ").split(" ")[0];if(!(o.length<1||"0"==o[0])){var a=e.getHours(),i=e.getDay();__ez.bit.Add(L,[new __ezDotData("t_local_date",o),new __ezDotData("t_local_hour",a),new __ezDotData("t_local_day_of_week",i),new __ezDotData("t_local_timezone",t)])}}}},addScrollDepth:function(){var e=T.getScrollDepth();e!=I.scrollDepth&&(__ez.bit.Add(L,[new __ezDotData("scroll_percent_vertical",e)]),I.scrollDepth=e)},addPageShares:function(){k.shares>0&&k.shares!=I.shareCount&&(_("[Page Share] Store page shares: "+k.shares),__ez.bit.Add(L,[new __ezDotData("share",k.shares)]),I.shareCount=k.shares)},unloadAll:function(e){var t=T.getTime();F.addEngagedTimes(t),F.addCopyPaste(),F.addScrollDepth(),F.addIsEngagedPage(t),F.addIsFirstEngagedPage(t),F.addPageShares(),_("Unload ("+e.type+")"),m()}};return e(),{init:e,destroy:function(){D(),r(),v()}}}}();